{"version":3,"sources":["webpack:///./src/components/Posts/Posts.vue?4a85","webpack:///src/components/Posts/Posts.vue","webpack:///./src/components/Posts/Posts.vue?b77d","webpack:///./src/components/Posts/Posts.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","grid-list-xl","row","wrap","_l","infiniteScrollPosts","post","key","_id","xs12","sm6","hover","src","imageUrl","height","lazy","nativeOn","click","$event","goToPost","primary","staticClass","_v","_s","title","likes","messages","length","icon","on","showPostCreator","directives","name","rawName","value","expression","avatar","createdBy","username","formatCreatedDate","createdDate","ripple","color","_e","column","justify-center","showMorePosts","staticRenderFns","pageSize","Postsvue_type_script_lang_js_","data","pageNum","apollo","query","queries","variables","computed","showMoreEnabled","hasMore","methods","postId","$router","push","concat","date","moment_timezone_default","Number","format","$apollo","fetchMore","updateQuery","prevResult","_ref","fetchMoreResult","console","log","posts","newPosts","__typename","Object","toConsumableArray","Posts_Postsvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,MAAA,CAAOC,MAAA,GAAAC,eAAA,KAA8B,CAAAR,EAAA,oBAAAI,EAAA,YAA2CE,MAAA,CAAOG,IAAA,GAAAC,KAAA,KAAoBV,EAAAW,GAAAX,EAAAY,oBAAA,eAAAC,GAAuD,OAAAT,EAAA,UAAoBU,IAAAD,EAAAE,IAAAT,MAAA,CAAoBU,KAAA,GAAAC,IAAA,KAAoB,CAAAb,EAAA,UAAeE,MAAA,CAAOY,MAAA,KAAY,CAAAd,EAAA,SAAcE,MAAA,CAAOa,IAAAN,EAAAO,SAAAC,OAAA,OAAAC,KAAA,IAA8CC,SAAA,CAAWC,MAAA,SAAAC,GAAyBzB,EAAA0B,SAAAb,EAAAE,SAAyBX,EAAA,kBAAAA,EAAA,gBAA0CE,MAAA,CAAOqB,QAAA,KAAc,CAAAvB,EAAA,OAAAA,EAAA,OAAsBwB,YAAA,YAAuB,CAAA5B,EAAA6B,GAAA7B,EAAA8B,GAAAjB,EAAAkB,UAAA3B,EAAA,QAA0CwB,YAAA,cAAyB,CAAA5B,EAAA6B,GAAA7B,EAAA8B,GAAAjB,EAAAmB,OAAA,YAAAhC,EAAA8B,GAAAjB,EAAAoB,SAAAC,QAAA,mBAAA9B,EAAA,YAAAA,EAAA,SAAmHE,MAAA,CAAO6B,KAAA,IAAUC,GAAA,CAAKZ,MAAA,SAAAC,GAAyBzB,EAAAqC,iBAAArC,EAAAqC,mBAA6C,CAAAjC,EAAA,UAAAJ,EAAA6B,GAAA7B,EAAA8B,GAAA,mBAAA9B,EAAAqC,gBAAA,yBAAAjC,EAAA,wBAAAA,EAAA,eAAkJkC,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAzC,EAAA,gBAAA0C,WAAA,oBAAsFd,YAAA,kBAA+B,CAAAxB,EAAA,eAAoBE,MAAA,CAAOqC,OAAA,KAAa,CAAAvC,EAAA,sBAAAA,EAAA,OAAqCE,MAAA,CAAOa,IAAAN,EAAA+B,UAAAD,YAA6BvC,EAAA,uBAAAA,EAAA,qBAAsDwB,YAAA,iBAA4B,CAAA5B,EAAA6B,GAAA7B,EAAA8B,GAAAjB,EAAA+B,UAAAC,aAAAzC,EAAA,yBAAwEwB,YAAA,oBAA+B,CAAA5B,EAAA6B,GAAA,SAAA7B,EAAA8B,GAAA9B,EAAA8C,kBAAAjC,EAAAkC,kBAAA,GAAA3C,EAAA,sBAAAA,EAAA,SAA8GE,MAAA,CAAO6B,KAAA,GAAAa,OAAA,KAAuB,CAAA5C,EAAA,UAAeE,MAAA,CAAO2C,MAAA,mBAA0B,CAAAjD,EAAA6B,GAAA,wCAA+C,GAAA7B,EAAAkD,KAAAlD,EAAA,gBAAAI,EAAA,YAAmDE,MAAA,CAAO6C,OAAA,KAAa,CAAA/C,EAAA,UAAeE,MAAA,CAAOU,KAAA,KAAW,CAAAZ,EAAA,YAAiBE,MAAA,CAAO8C,iBAAA,GAAA3C,IAAA,KAA8B,CAAAL,EAAA,SAAcE,MAAA,CAAO2C,MAAA,QAAeb,GAAA,CAAKZ,MAAAxB,EAAAqD,gBAA2B,CAAArD,EAAA6B,GAAA,4BAAA7B,EAAAkD,MAAA,IAC33DI,EAAA,0FC+DAC,EAAA,EAEAC,EAAA,CACAjB,KAAA,QACAkB,KAFA,WAGA,OACAC,QAAA,EAEArB,iBAAA,IAGAsB,OAAA,CACA/C,oBAAA,CACAgD,MAAAC,EAAA,KACAC,UAAA,CACAJ,QAAA,EACAH,cAIAQ,SAAA,CACAC,gBADA,WAEA,OAAA/D,KAAAW,qBAAAX,KAAAW,oBAAAqD,UAGAC,QAAA,CACAxC,SADA,SACAyC,GACAlE,KAAAmE,QAAAC,KAAA,UAAAC,OAAAH,KAEArB,kBAJA,SAIAyB,GACA,OAAAC,IAAAC,OAAAF,IAAAG,OAAA,OAEArB,cAPA,WAQApD,KAAAyD,SAAA,EAEAzD,KAAA0E,QAAAd,QAAAjD,oBAAAgE,UAAA,CACAd,UAAA,CAEAJ,QAAAzD,KAAAyD,QACAH,YAEAsB,YAAA,SAAAC,EAAAC,GAAA,IAAAC,EAAAD,EAAAC,gBACAC,QAAAC,IAAA,kBAAAJ,EAAAlE,oBAAAuE,OACAF,QAAAC,IAAA,oBAAAF,GAEA,IAAAI,EAAAJ,EAAApE,oBAAAuE,MACAlB,EAAAe,EAAApE,oBAAAqD,QAGA,OACArD,oBAAA,CACAyE,WAAAP,EAAAlE,oBAAAyE,WAEAF,MAAA,GAAAb,OAAAgB,OAAAC,EAAA,KAAAD,CAAAR,EAAAlE,oBAAAuE,OAAAG,OAAAC,EAAA,KAAAD,CAAAF,IACAnB,kBCtH8VuB,EAAA,cCO9VC,EAAgBH,OAAAI,EAAA,KAAAJ,CACdE,EACAzF,EACAuD,GACF,EACA,KACA,KACA,MAIAmC,EAAAE,QAAAC,OAAA,YACeC,EAAA,WAAAJ","file":"js/chunk-2d0f1152.a42f2f12.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[(_vm.infiniteScrollPosts)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.infiniteScrollPosts.posts),function(post){return _c('v-flex',{key:post._id,attrs:{\"xs12\":\"\",\"sm6\":\"\"}},[_c('v-card',{attrs:{\"hover\":\"\"}},[_c('v-img',{attrs:{\"src\":post.imageUrl,\"height\":\"30vh\",\"lazy\":\"\"},nativeOn:{\"click\":function($event){_vm.goToPost(post._id)}}}),_c('v-card-actions',[_c('v-card-title',{attrs:{\"primary\":\"\"}},[_c('div',[_c('div',{staticClass:\"headline\"},[_vm._v(_vm._s(post.title))]),_c('span',{staticClass:\"grey--text\"},[_vm._v(_vm._s(post.likes)+\" likes - \"+_vm._s(post.messages.length)+\" comments\")])])]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.showPostCreator = !_vm.showPostCreator}}},[_c('v-icon',[_vm._v(_vm._s((\"keyboard_arrow_\" + (_vm.showPostCreator ? 'up' : 'down'))))])],1)],1),_c('v-slide-y-transition',[_c('v-card-text',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPostCreator),expression:\"showPostCreator\"}],staticClass:\"grey lighten-4\"},[_c('v-list-tile',{attrs:{\"avatar\":\"\"}},[_c('v-list-tile-avatar',[_c('img',{attrs:{\"src\":post.createdBy.avatar}})]),_c('v-list-tile-content',[_c('v-list-tile-title',{staticClass:\"text--primary\"},[_vm._v(_vm._s(post.createdBy.username))]),_c('v-list-tile-sub-title',{staticClass:\"font-weight-thin\"},[_vm._v(\"Added \"+_vm._s(_vm.formatCreatedDate(post.createdDate)))])],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"ripple\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"grey lighten-1\"}},[_vm._v(\"info\")])],1)],1)],1)],1)],1)],1)],1)}),1):_vm._e(),(_vm.showMoreEnabled)?_c('v-layout',{attrs:{\"column\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"row\":\"\"}},[_c('v-btn',{attrs:{\"color\":\"info\"},on:{\"click\":_vm.showMorePosts}},[_vm._v(\"Fetch More\")])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid grid-list-xl>\n\n    <!-- Post Cards -->\n    <v-layout row wrap v-if=\"infiniteScrollPosts\">\n      <v-flex xs12 sm6 v-for=\"post in infiniteScrollPosts.posts\" :key=\"post._id\">\n        <v-card hover>\n          <v-img @click.native=\"goToPost(post._id)\" :src=\"post.imageUrl\" height=\"30vh\" lazy></v-img>\n\n          <v-card-actions>\n            <v-card-title primary>\n              <div>\n                <div class=\"headline\">{{post.title}}</div>\n                <span class=\"grey--text\">{{post.likes}} likes - {{post.messages.length}} comments</span>\n              </div>\n            </v-card-title>\n            <v-spacer></v-spacer>\n            <v-btn @click=\"showPostCreator = !showPostCreator\" icon>\n              <v-icon>{{`keyboard_arrow_${showPostCreator ? 'up' : 'down'}`}}</v-icon>\n            </v-btn>\n          </v-card-actions>\n\n          <!-- Post Creator Tile -->\n          <v-slide-y-transition>\n            <v-card-text v-show=\"showPostCreator\" class=\"grey lighten-4\">\n              <v-list-tile avatar>\n                <v-list-tile-avatar>\n                  <img :src=\"post.createdBy.avatar\">\n                </v-list-tile-avatar>\n\n                <v-list-tile-content>\n                  <v-list-tile-title class=\"text--primary\">{{post.createdBy.username}}</v-list-tile-title>\n                  <v-list-tile-sub-title class=\"font-weight-thin\">Added {{formatCreatedDate(post.createdDate)}}</v-list-tile-sub-title>\n                </v-list-tile-content>\n\n                <v-list-tile-action>\n                  <v-btn icon ripple>\n                    <v-icon color=\"grey lighten-1\">info</v-icon>\n                  </v-btn>\n                </v-list-tile-action>\n              </v-list-tile>\n            </v-card-text>\n          </v-slide-y-transition>\n\n        </v-card>\n      </v-flex>\n    </v-layout>\n\n    <!-- Fetch More Button -->\n    <v-layout v-if=\"showMoreEnabled\" column>\n      <v-flex xs12>\n        <v-layout justify-center row>\n          <v-btn color=\"info\" @click=\"showMorePosts\">Fetch More</v-btn>\n        </v-layout>\n      </v-flex>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport moment from \"moment-timezone\";\nimport { INFINITE_SCROLL_POSTS } from \"../../queries\";\n\nconst pageSize = 2;\n\nexport default {\n  name: \"Posts\",\n  data() {\n    return {\n      pageNum: 1,\n      // showMoreEnabled: true,\n      showPostCreator: false\n    };\n  },\n  apollo: {\n    infiniteScrollPosts: {\n      query: INFINITE_SCROLL_POSTS,\n      variables: {\n        pageNum: 1,\n        pageSize\n      }\n    }\n  },\n  computed: {\n    showMoreEnabled() {\n      return this.infiniteScrollPosts && this.infiniteScrollPosts.hasMore;\n    }\n  },\n  methods: {\n    goToPost(postId) {\n      this.$router.push(`/posts/${postId}`);\n    },\n    formatCreatedDate(date) {\n      return moment(Number(date)).format(\"ll\");\n    },\n    showMorePosts() {\n      this.pageNum += 1;\n      // fetch more data and transform original result\n      this.$apollo.queries.infiniteScrollPosts.fetchMore({\n        variables: {\n          // pageNum incremented by 1\n          pageNum: this.pageNum,\n          pageSize\n        },\n        updateQuery: (prevResult, { fetchMoreResult }) => {\n          console.log(\"previous result\", prevResult.infiniteScrollPosts.posts);\n          console.log(\"fetch more result\", fetchMoreResult);\n\n          const newPosts = fetchMoreResult.infiniteScrollPosts.posts;\n          const hasMore = fetchMoreResult.infiniteScrollPosts.hasMore;\n          // this.showMoreEnabled = hasMore;\n\n          return {\n            infiniteScrollPosts: {\n              __typename: prevResult.infiniteScrollPosts.__typename,\n              // Merge previous posts with new posts\n              posts: [...prevResult.infiniteScrollPosts.posts, ...newPosts],\n              hasMore\n            }\n          };\n        }\n      });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Posts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Posts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Posts.vue?vue&type=template&id=5d666e26&\"\nimport script from \"./Posts.vue?vue&type=script&lang=js&\"\nexport * from \"./Posts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Posts.vue\"\nexport default component.exports"],"sourceRoot":""}